/**
 * Timeline Feature Theme Extension
 *
 * Extends Tailwind's color palette with timeline-specific colors.
 * Colocated with timeline feature for better organization.
 *
 * These colors can be used with all Tailwind utilities:
 * - bg-timeline-video/30 (with opacity)
 * - hover:bg-timeline-audio
 * - border-timeline-playhead
 */

@theme {
  /* Timeline item type colors - OKLCH format (dark, muted for dark theme) */
  --color-timeline-baseclip: oklch(0.42 0 0);
  --color-timeline-video: oklch(0.3991 0.0401 250);
  --color-timeline-audio: oklch(0.22 0.02 302);
  --color-timeline-image: oklch(0.62 0.17 250);
  --color-timeline-text: oklch(0.671 0 290);
  --color-timeline-shape: oklch(0.68 0.19 45);

  /* Playhead color */
  --color-timeline-playhead: oklch(0.68 0.19 45);    /* Orange (matches primary) */

  /* In/Out marker colors */
  --color-timeline-in: oklch(0.65 0.18 142);         /* Green - in point */
  --color-timeline-out: oklch(0.61 0.22 29);         /* Red - out point */
  --color-timeline-io-handle: oklch(0.69 0.16 250);  /* Blue handle for draggable I/O markers */
  --color-timeline-io-range-fill: oklch(0.51 0.10 42 / 0.55); /* Warm in/out span fill */
  --color-timeline-io-range-border: oklch(0.69 0.16 250); /* Blue outline for in/out span */
  --color-timeline-io-range-glow: oklch(0.69 0.16 250 / 0.28); /* Subtle glow around selected span */

  /* Marker color */
  --color-timeline-marker: oklch(0.65 0.20 250);     /* Blue - timeline markers */

  /* Snap/Join indicator colors */
  --color-timeline-snap: #f97316;                    /* orange-500 - snap indicator */
  --color-timeline-join: #fb923c;                    /* orange-400 - join indicator */


  --color-video-preview-background: oklch(0.1914 0 58);
}

/* Scissors cursor for razor/cut tool - uses Lucide scissors icon rotated to face up */
.cursor-scissors {
  cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cg transform='rotate(-90 12 12)'%3E%3Ccircle cx='6' cy='6' r='3'/%3E%3Cpath d='M8.12 8.12 12 12'/%3E%3Cpath d='M20 4 8.12 15.88'/%3E%3Ccircle cx='6' cy='18' r='3'/%3E%3Cpath d='M14.8 14.8 20 20'/%3E%3C/g%3E%3C/svg%3E") 12 12, crosshair !important;
}

/* Gauge cursor for rate stretch tool - uses Lucide gauge icon */
.cursor-gauge {
  cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m12 14 4-4'/%3E%3Cpath d='M3.34 19a10 10 0 1 1 17.32 0'/%3E%3C/svg%3E") 12 12, crosshair !important;
}

/* Force cursor globally during timeline item drag (overrides per-item cursor classes). */
body.timeline-item-drag-cursor-grabbing,
body.timeline-item-drag-cursor-grabbing * {
  cursor: grabbing !important;
}

body.timeline-item-drag-cursor-copy,
body.timeline-item-drag-cursor-copy * {
  cursor: copy !important;
}

body.timeline-item-drag-cursor-not-allowed,
body.timeline-item-drag-cursor-not-allowed * {
  cursor: not-allowed !important;
}

/* Subtle diagonal stripes for expanded group tracks */
.bg-group-stripes {
  background-image: repeating-linear-gradient(
    -45deg,
    transparent,
    transparent 6px,
    oklch(50% 0 0deg / 12%) 6px,
    oklch(50% 0 0deg / 12%) 8px
  );
}

/* Timeline scroll container - enables horizontal scrolling with visible scrollbar */
.timeline-container {
  overflow-x: auto;
  overflow-y: auto;
}

/* Waveform gradient background - darker edges, dark center */
.bg-waveform-gradient {
  background: linear-gradient(
    to bottom,
    oklch(0.20 0 0) 0%,
    oklch(0.28 0 0) 50%,
    oklch(0.20 0 0) 100%
  );
}

/* Image clip gradient background - subtle blue tint */
.bg-image-gradient {
  background: linear-gradient(
    to bottom,
    oklch(0.20 0.02 250) 0%,
    oklch(0.28 0.02 250) 50%,
    oklch(0.20 0.02 250) 100%
  );
}

/* Audio clip gradient background - subtle purple tint */
.bg-audio-gradient {
  background: linear-gradient(
    to bottom,
    oklch(0.20 0.02 302) 0%,
    oklch(0.28 0.02 302) 50%,
    oklch(0.20 0.02 302) 100%
  );
}

/* Text clip gradient background - subtle purple tint */
.bg-text-gradient {
  background: linear-gradient(
    to bottom,
    oklch(0.20 0.02 290) 0%,
    oklch(0.28 0.02 290) 50%,
    oklch(0.20 0.02 290) 100%
  );
}

/* Shape clip gradient background - subtle orange tint */
.bg-shape-gradient {
  background: linear-gradient(
    to bottom,
    oklch(0.20 0.02 45) 0%,
    oklch(0.28 0.02 45) 50%,
    oklch(0.20 0.02 45) 100%
  );
}

/* content-visibility optimization for timeline items
 * Defers rendering of off-screen items for faster initial paint
 * See: Vercel React Best Practices - rendering-content-visibility
 */
.timeline-item {
  content-visibility: auto;
  contain-intrinsic-size: auto 80px; /* width auto, estimated height matches DEFAULT_TRACK_HEIGHT */
}

.track-header-item {
  content-visibility: auto;
  contain-intrinsic-size: 192px 80px; /* sidebar width, estimated height matches DEFAULT_TRACK_HEIGHT */
}

/* Filmstrip loading shimmer animation */
@keyframes filmstrip-shimmer {
  0% {
    background-position: -156px 0;
  }
  100% {
    background-position: 156px 0;
  }
}
